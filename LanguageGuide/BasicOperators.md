# 基础运算符

&#160; &#160; &#160; &#160; **运算符（ _operator_ ）**是用于检查、修改或组合量值时的特殊符号或语句。比如，加法运算符（`+`）可以计算两个数值之和 —— `let i = 1 + 2`；逻辑与运算符（`&&`）可以组合两个布尔值 —— `if enteredDoorcode && passedRetinaScan`。

&#160; &#160; &#160; &#160; Swift 支持 C 语言的诸多运算符，并且在其基础上进一步提升其能力，从而避免了一些常见的编码错误。比如，赋值运算符（`=`）不会返回一个值，从而避免在使用相等比较运算符（`==`）场合下的误用。算术运算符（`+`、`-`、`*`、`/`、`%` 等）可以预测并阻止数值溢出，从而避免了一些计算结果数值可能过大或过小致使超出其数值类型可表示范围，进而最终得到的值可能与预期相差甚远的问题。对于可能需要的数值溢出行为，Swift 也提供了数值溢出运算符，详情可参考 [数值溢出运算符](./AdvancedOperators.md#数值溢出运算符) 章节。

&#160; &#160; &#160; &#160; 此外，Swift 还提供了 C 语言所没有的区间运算符 —— `a..<b` 和 `a...b`，以此来作为一个数值区间的简写方式。

&#160; &#160; &#160; &#160; 本章内容会讲解 Swift 中常见的运算符。[高级运算符](./AdvancedOperators.md) 章节则会继续介绍 Swift 的高级运算符，并说明如何自定义运算符以及如何让自定义类型适配标准运算符。

## 术语

&#160; &#160; &#160; &#160; 数值运算符可分为一元运算符、二元运算符以及三元运算符：

- **一元**运算符只能操作一个目标值（比如 `-a`）。一元**前缀（ _prefix_ ）**运算符需要放置在目标值前（比如 `!b`），而一元**后缀（ _postfix_ ）**运算符需要紧跟在目标值之后（比如 `c!`）。

- **二元**运算符会操作两个目标值（比如 `2 + 3`）并且由于需要在两目标值中间，所以是**中缀（ _infix_ ）**运算符。

- **三元**运算符可以操作三个目标值。和 C 语言一样，Swift 也只有唯一的三元运算符 —— 三元逻辑运算符（`a ? b: c`）。

&#160; &#160; &#160; &#160; 操作符影响的值称为**操作数（ _operands_ ）**。在表达式 `1 + 2` 中，中缀运算符 `+` 的两个操作数就是数值 `1` 和 `2`。

## 赋值运算符

&#160; &#160; &#160; &#160; **赋值运算符（ _assignment operator_ ）**用于初始化或更新一个变量的值，比如这里 `a = b` 就是用 `b` 的值去更新 `a` 的值：

```swift
let b = 10
var a = 5
a = b
// 此时，a 的值为 10
```

&#160; &#160; &#160; &#160; 如果赋值符号右侧是一个拥有多个元素值的元组类型值，那么它的每个元素值也可以一次性地独立拆分出来：

```swift
let (x, y) = (1, 2)
// 此时，x 的值为 1，y 的值为 2
```

&#160; &#160; &#160; &#160; 与 C 语言和 Objective-C 语言不同，Swift 语言中的赋值运算符本身并不会返回一个值。所以下面的语句是非法[^1]的：

```swift
if x = y {
    // 这段代码是非法的，因为语句 x = y 并不会返回一个值
}
```

&#160; &#160; &#160; &#160; 这个编译报错可以避免实际需要用相等比较运算符（`==`）时，却误用了赋值运算符（`=`）的错误。通过令 `if x = y` 语句报错，Swift 可以帮助避免代码中诸如此类的错误。

## 算术运算符

&#160; &#160; &#160; &#160; Swift 对于所有的数值类型均支持这四种标准**算术运算符（ _arithmetic operator_ ）**：

- 加法运算符 （`+`）

- 减法运算符 （`-`）

- 乘法运算符 （`*`）

- 除法运算符 （`/`）

```swift
1 + 2       // 值为 3
5 - 3       // 值为 2
2 * 3       // 值为 6
10.0 / 2.5  // 值为 4.0
```

&#160; &#160; &#160; &#160; 与 C 语言和 Objective-C 语言不同，Swift 语言中的算术运算符默认不允许数值溢出，但也可以选择使用支持数值溢出运算的运算符（比如 `a &+ b`），详情可参考 [数值溢出运算符](./AdvancedOperators.md#数值溢出运算符) 章节。

&#160; &#160; &#160; &#160; 加法运算符也可以用于 `String` 类型值拼接：

```swift
"hello, " + "world"  // 值为 "hello, world"
```

### 取余运算符

&#160; &#160; &#160; &#160; **取余运算符（ _remainder operator_ ）** `a % b` 用于计算 `a` 是 `b` 的多少倍，并返回余数（ _remainder_ ）。

> _**说明**_
>
> &#160; &#160; &#160; &#160; 取余运算符在其他编程语言中也称为**取模运算符（ _modulo operator_ ）**。然而严格来讲，它在 Swift 中对于负数的行为是取余而非取模。

&#160; &#160; &#160; &#160; 说明一下取余运算符的原理。要计算 `9 % 4`，首先要确定 `9` 当中有多少个 `4`：

<div align="center">
    <img src="https://docs.swift.org/swift-book/_images/remainderInteger_2x.png"></img>
</div>

&#160; &#160; &#160; &#160; 可以看到，`9` 中有两个 `4`，并且余数是 `1`（浅橙色部分）。

&#160; &#160; &#160; &#160; Swift 中就可以写作：

```swift
9 % 4    // 值为 1
```

&#160; &#160; &#160; &#160; 为了计算 `a % b` 的结果，`%` 运算符需要计算如下等式并将余数作为其输出：

&#160; &#160; &#160; &#160; `a` = (`b` x `some multiplier`) + `remainder`

&#160; &#160; &#160; &#160; 此处的 `some multiplier` 就是使得 `b` 与之相乘的值不大于（负数时相反） `a` 的最大倍数。

&#160; &#160; &#160; &#160; 那么，把 `9` 与 `4` 代入等式：

&#160; &#160; &#160; &#160; `9` = (`4` x `2`) + `1`

&#160; &#160; &#160; &#160; 当 `a` 的值是一个负数时，这个计算余数的方法同样适用：

```swift
-9 % 4   // 值为 -1
```

&#160; &#160; &#160; &#160; 将 `-9` 和 `4` 代入等式：

&#160; &#160; &#160; &#160; `-9` = (`4` x `-2`) + `-1`

&#160; &#160; &#160; &#160; 从而得到余数值为 `-1`。

&#160; &#160; &#160; &#160; 当 `b` 的值是负数时，`b` 的符号会被忽略，这也就意味着 `a % b` 和 `a % -b` 的结果总是相同的。

### 一元负数运算符

&#160; &#160; &#160; &#160; 数值运算符也可被作为前缀，这就人们所熟知的**一元负数运算符（ _unary minus operator_ ）**：

```swift
let three = 3
let minusThree = -three       // minusThree 值为 -3
let plusThree = -minusThree   // plusThree 值为 3, 或者说是 “负的负的数值 3”
```

&#160; &#160; &#160; &#160; 一元负数运算符（`-`）要直接写在相应数值的前面，二者中间不能有空格。

### 一元正数运算符

&#160; &#160; &#160; &#160; **一元正数运算符（ _unary plus operator_ ）**（`+`）会直接将其运算值返回，不会有任何变化：

```swift
let minusSix = -6
let alsoMinusSix = +minusSix  // alsoMinusSix 值为 -6
```

&#160; &#160; &#160; &#160; 尽管一元正数运算符实际并不会做任何事情，但依然可以在代码中已有负数时用它来表示正数，从而令代码更具对称性（看起来更清晰，可读性会更好）。

## 组合赋值运算符

## 比较运算符

## 三元条件运算符

## 空值合并运算符

## 区间运算符

## 逻辑运算符

---

[^1]: **非法（ _invalid_ ）**语句一般是指编译阶段无法通过编译器检查，进而导致无法成功编译的语句。此时的非法指的是不符合编程语言的语法。